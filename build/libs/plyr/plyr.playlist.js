function triggerEvent(e,t="",i=!1,s={}){if(null!==e&&"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument&&""!=t){s.plyr=this;var a=new CustomEvent(t,{bubbles:i,detail:s});e.dispatchEvent(a)}}function assurePlaybackState(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,triggerEvent.call(this,this.media,e?"play":"pause"))}window.Playlist={},window.players=[],function(e){"use strict";Playlist=function(t,i,s){var a=this;this.player=null,this.repeat=0,this.shuffle=!1,this.adsing=!1,this.items=i||[],this.item=null,this.active=0,this.oitems=e.merge([],i),this.timeout=null,this.adsInter=1,this.timer=0,this.live=!1,this.livePaused=!0,this.liveServer="",this.liveAPI="liveAPI",this.async=!0,this.type="audio",this.provider="html5",this.resource=!0,this.autoplay=!1,this.preview=!1,this.init=!1,this.options=e.extend(!0,{},this._options,s),this.el=e.extend({},this._el(),t),e.get(this.options.iconUrl,(function(e){var t=document.createElement("div");t.setAttribute("hidden",""),t.setAttribute("id","plyr-sprite"),t.innerHTML=(new XMLSerializer).serializeToString(e.documentElement),document.body.insertBefore(t,document.body.childNodes[0])})),e.each(this.el,(function(e,t){"playlist"!==e&&"controls"!==e&&(a.el[e]=a.el.playlist+" "+a.el[e])})),this.player=new Plyr(this.el.player,this.options),players.push(this.player),this.log("Init"),this._init()},Playlist.prototype={_options:{theme:0,bufferingClass:"is-buffering",initingClass:"plyr-initing",liveClass:"plyr--live",adsClass:"plyr--adsing",adsInterval:3,timeoutCount:1e4,debug:!1,iconUrl:"",autoplay:!1,autonext:!0,hideControls:!0,history:!0,expand:!1,fullscreen:{enabled:!0},controls:["play","progress","current-time","duration","mute","volume","captions","settings","pip","airplay","fullscreen"],i18n:{queue:"Queue",clear:"Clear",nextup:"Next up",empty:"Your queue is empty",live:"Live",preview:"Preview"}},_el:function(){return{playlist:"#playlist",player:"audio",plyr:".plyr",control:".plyr__controls",col:".plyr__col",row:".plyr__row",btns:".plyr-control-btns",ctrl:".plyr-control-ctrl",info:".plyr-control-info",wrap:".plyr-list-wrap",durationWrap:".plyr-duration-wrap",items:".plyr-list",item:".plyr-item",clear:".plyr-clear",cover:".plyr__controls .plyr__cover",title:".plyr__title",author:".plyr__author",content:".plyr__content",preview:".plyr-preview",progress:".plyr__progress__container",time:".plyr__time",current:".plyr__time--current",duration:".plyr__time--duration",queue:".plyr__queue",volume:".plyr__volume",prev:'[data-plyr="prev"]',play:'[data-plyr="play"]',next:'[data-plyr="next"]',shuffle:'[data-plyr="shuffle"]',repeat:'[data-plyr="repeat"]',like:'[data-plyr="like"]',download:'[data-plyr="download"]',purchase:'[data-plyr="purchase"]',captions:'[data-plyr="captions"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',video:'[data-plyr="video"]',fullscreen:'[data-plyr="fullscreen"]',menu:".plyr__menu",close:'[data-plyr="close"]',list:'[data-plyr="list"]',msg:".plyr__msg",waveform:".plyr__waveform",controls:{col:'<div class="plyr__col"></div>',row:'<div class="plyr__row"></div>',btns:'<div class="plyr-control-btns"></div>',ctrl:'<div class="plyr-control-ctrl"></div>',info:'<div class="plyr-control-info"></div>',wrap:'<div class="plyr-list-wrap"><div class="plyr-list"><div class="plyr-list-header"><h4>'+this.options.i18n.nextup+'</h4><button class="plyr-clear">'+this.options.i18n.clear+'</button><button class="plyr-close-queue"><svg role="presentation"><use xlink:href="#plyr-close"></use></svg></button></div><div class="plyr-list-content"></div></div></div>',durationWrap:'<div class="plyr-duration-wrap"></div>',prev:'<button type="button" class="plyr__control" data-plyr="prev"><svg role="presentation"><use xlink:href="#plyr-prev"></use></svg></button>',next:'<button type="button" class="plyr__control" data-plyr="next"><svg role="presentation"><use xlink:href="#plyr-next"></use></svg></button>',shuffle:'<button type="button" class="plyr__control" data-plyr="shuffle"><svg role="presentation"><use xlink:href="#plyr-shuffle"></use></svg></button>',repeat:'<button type="button" class="plyr__control" data-plyr="repeat"><svg class="icon-repeat"><use xlink:href="#plyr-repeat"></use></svg><svg class="icon-repeat-once"><use xlink:href="#plyr-repeat-once"></use></svg></button>',cover:'<div class="plyr__cover"></div>',content:'<div class="plyr__content"><span class="plyr-preview">'+this.options.i18n.preview+'</span><a class="plyr__title ajax" href="#"></a><div class="plyr__author"></div></div>',like:'<button type="button" class="plyr__control btn-like" data-action="like" data-type="post" data-plyr="like"><svg role="presentation"><use xlink:href="#plyr-like"></use></svg></button>',download:'<a target="_blank" class="plyr__control no-ajax" data-plyr="download"><svg role="presentation"><use xlink:href="#plyr-download"></use></svg></a>',purchase:'<a target="_blank" class="plyr__control" data-plyr="purchase"></a>',list:'<button type="button" class="plyr__control" data-plyr="list"><svg role="presentation"><use xlink:href="#plyr-list"></use></svg></button>',video:'<button type="button" class="plyr__control" data-plyr="video"><svg class="plyr-video-off"><use xlink:href="#plyr-video-off"></use></svg><svg class="plyr-video-on"><use xlink:href="#plyr-video-on"></use></svg></button>',msg:'<div class="plyr__msg"><div class="plyr__msg_content"><div class="plyr__msg_desc"></div><button class="close">&times;</button></div></div>',queue:'<div class="plyr__queue" data-plyr="list"><span></span><svg role="presentation"><use xlink:href="#plyr-expander"></use></svg></span>',item:'<div class="plyr-item"><div class="plyr-item-cover"><button class="btn-play"></button></div><div class="plyr-item-content"><a class="plyr-item-title"></a><div class="plyr-item-author"></div></div><button class="plyr-item-close close">&times;</button><button data-action="like" data-type="post" class="btn-like"><svg role="presentation"><use xlink:href="#plyr-like"></use></svg></button></div>',close:'<button class="plyr__control" data-plyr="close"><svg role="presentation"><use xlink:href="#plyr-close"></use></svg></button>',waveform:'<div class="plyr__waveform waveform"><div class="waveform-container"></div></div>'}}},_init:function(){var e=this;e._createItems(),e._initPlayerEvent(),e._initNavigatorPlayer()},_initPlayerEvent:function(){var t=this;this.log("Init plyr event"),this.player.on("ready",(function(i){if(e(t.el.plyr).removeClass(t.options.initingClass),t._createControls(),t._initEvents(),t._initState(),t.autoplay){t.isIOS()&&"youtube"==t.provider&&(t.player.currentTime=0),t.log("Play");var s=t.player.play();void 0!==s&&s.catch((function(e){t.log(e)})).then((function(){}))}else t._initHistory()})),this.player.on("play",(function(e){t._activeItem(),t.stopAds(),players.forEach((function(e){e!==t.player&&e.pause()})),t.live&&t.livePaused&&(t.log("Live restart"),t._play(t.active),t.livePaused=!1),t.isPlayable()||t.player.stop()})),this.player.on("pause",(function(i){t._activeItem(),e("html").removeClass(t.options.bufferingClass),t.live&&(t.livePaused=!0)})),this.player.on("enterfullscreen",(function(i){e(t.el.plyr).addClass("plyr-fullscreen")})),this.player.on("exitfullscreen",(function(i){e(t.el.plyr).removeClass("plyr-fullscreen")})),this.player.on("loadstart",(function(i){e("html").addClass(t.options.bufferingClass)})),this.player.on("waiting",(function(i){e("html").addClass(t.options.bufferingClass)})),this.player.on("seeking",(function(i){e("html").addClass(t.options.bufferingClass)})),this.player.on("canplay",(function(i){e("html").removeClass(t.options.bufferingClass)})),this.player.on("playing",(function(i){e("html").removeClass(t.options.bufferingClass)})),this.player.on("seeked",(function(i){e("html").removeClass(t.options.bufferingClass)})),this.player.on("pause",(function(i){e("html").removeClass(t.options.bufferingClass)})),this.player.on("stop",(function(i){e("html").removeClass(t.options.bufferingClass)})),this.player.on("error",(function(i){e("html").removeClass(t.options.bufferingClass),4==t.player.media.error.code&&t.showMsg(t.options.i18n.error),t.next()})),this.player.on("adsimpression",(function(e){t.startAds()})),this.player.on("adscomplete",(function(e){t.stopAds()})),this.player.on("timeupdate",(function(i){t.timer++,5==t.timer&&(0==t.player.duration||t.player.duration>=2**32)&&(t.live=!0,e(t.el.plyr).addClass(t.options.liveClass),e(t.el.duration).html('<span class="plyr-live">'+t.options.i18n.live+"</span>")),t.item&&(t.timer/4==parseInt(t.options.timeoutCount)/1e3&&e(document).trigger("played",{id:t.item.id}),t.item.start&&t.item.start>0&&t.item.start/1e3>t.player.currentTime&&(t.player.currentTime=parseInt(t.item.start)/1e3),t.item.end&&t.item.end>0&&t.item.end/1e3==parseInt(t.player.currentTime)&&triggerEvent.call(t.player,t.player.media,"ended"))})),this.player.on("ended",(function(){t._activeItem(),t.player.stop(),t.preview?e(document).trigger("player_preview_end"):2!=t.repeat?1!=t.repeat||t.active!=t.items.length-1?t.options.autonext&&(t.items.length>1&&(t.active<t.items.length-1||t.shuffle)?t.next():t.autoNext()):t.next():t._play(t.active)})),e(document).on("pjax:success",(function(e){t._activeItem()}))},_initNavigatorPlayer:function(){var e=this;navigator.mediaSession&&(this.log("Init navigator event"),navigator.mediaSession.setActionHandler("play",(function(){e.player.play()})),navigator.mediaSession.setActionHandler("pause",(function(){e.player.pause()})),navigator.mediaSession.setActionHandler("previoustrack",(function(){e.prev()})),navigator.mediaSession.setActionHandler("nexttrack",(function(){e.next()})),e.isIOS()||(navigator.mediaSession.setActionHandler("seekbackward",(function(t){e.player.rewind()})),navigator.mediaSession.setActionHandler("seekforward",(function(t){e.player.forward()}))))},isIOS:function(){return/iPhone|iPod|iPad/.test(navigator.platform)},_initState:function(){this.shuffle?e(this.el.shuffle).addClass("is--shuffle"):e(this.el.shuffle).removeClass("is--shuffle"),0==this.repeat&&e(this.el.repeat).removeClass("is--repeat is--repeat-once"),1==this.repeat&&e(this.el.repeat).addClass("is--repeat"),2==this.repeat&&e(this.el.repeat).addClass("is--repeat is--repeat-once")},_initEvents:function(){var t=this;e(this.el.prev).off().on("click",(function(){t.prev()})),e(this.el.next).off().on("click",(function(){t.active!=t.items.length-1?t.next():t.autoNext()})),e(this.el.shuffle).off().on("click",(function(){t.shuffle=!t.shuffle,t._initState()})),e(this.el.repeat).off().on("click",(function(){t.repeat++,3==t.repeat&&(t.repeat=0),t._initState()})),e(this.el.control).off().on("click",(function(i){t.options.expand&&e(i.target).hasClass("plyr__controls")&&e(t.el.playlist).toggleClass("plyr-expand")})),e(this.el.list).off().on("click",(function(){e(t.el.playlist).toggleClass("open")})),e(".plyr-close-queue").off().on("click",(function(){e(t.el.playlist).toggleClass("open")})),e(this.el.video).off().on("click",(function(){e(t.el.plyr).toggleClass("plyr__toggle-video")})),e(this.el.clear).off().on("click",(function(){t.setItems([])})),e(this.el.close).off().on("click",(function(){t.pause(),t.setItems([]),e(t.el.playlist).addClass("close-player")}))},_initHistory:function(){!this.init&&this.items.length>0&&(this.log("Start history"),this.init=!0,this.setSource())},_createControls:function(){if(this.resource){switch(this.log("Create controls"),e(this.el.controls.prev).insertBefore(e(this.el.play)),e(this.el.controls.next).insertAfter(e(this.el.play)),e(this.el.controls.repeat).insertAfter(e(this.el.next)),e(this.el.controls.shuffle).insertAfter(e(this.el.repeat)),e(this.el.controls.cover).insertAfter(e(this.el.shuffle)),e(this.el.controls.content).insertAfter(this.el.cover),e(this.el.controls.purchase).insertAfter(e(this.el.volume)),e(this.el.controls.download).insertAfter(e(this.el.volume)),e(this.el.controls.like).insertAfter(e(this.el.volume)),e(this.el.controls.video).insertAfter(e(this.el.menu)),e(this.el.controls.list).insertAfter(e(this.el.menu)),e(this.el.control).append(this.el.controls.btns),e(this.el.control).append(this.el.controls.ctrl),e(this.el.control).append(this.el.controls.info),e(this.el.btns).append(e(this.el.prev),e(this.el.play),e(this.el.next),e(this.el.repeat),e(this.el.shuffle)),e(this.el.ctrl).append(e(this.el.current),e(this.el.progress),e(this.el.duration),e(this.el.volume),e(this.el.captions),e(this.el.pip),e(this.el.fullscreen),e(this.el.airplay),e(this.el.video),e(this.el.menu)),e(this.el.info).append(e(this.el.cover),e(this.el.content),e(this.el.purchase),e(this.el.download),e(this.el.like),e(this.el.list)),this.options.theme){case"1":e(this.el.info).append(e(this.el.controls.col).append(e(this.el.controls.row).append(e(this.el.content),e(this.el.preview),e(this.el.time)),e(this.el.progress))),e(this.el.ctrl).append(e(this.el.purchase),e(this.el.download),e(this.el.like),e(this.el.list));break;case"2":e(this.el.shuffle).insertBefore(e(this.el.prev)),e(this.el.current).insertBefore(e(this.el.duration)),e(this.el.list).appendTo(e(this.el.ctrl));break;case"3":e(this.el.list).appendTo(e(this.el.ctrl)),e(this.el.btns).append(e(this.el.controls.row).append(e(this.el.shuffle),e(this.el.prev),e(this.el.play),e(this.el.next),e(this.el.repeat))),e(this.el.btns).append(e(this.el.controls.row).append(e(this.el.current),e(this.el.progress),e(this.el.duration)));break;case"4":e(this.el.repeat).insertBefore(e(this.el.prev)),e(this.el.shuffle).insertBefore(e(this.el.prev)),e(this.el.list).appendTo(e(this.el.btns));break;case"radio":e(this.el.current).insertBefore(e(this.el.duration)),e(this.el.list).appendTo(e(this.el.ctrl));break;case"video":e(this.el.btns).append(e(this.el.controls.durationWrap).append(e(this.el.time)),this.el.controls.close),e(this.el.control).append(e(this.el.cover),e(this.el.progress)),e(this.el.content).first().append(this.el.controls.queue).insertBefore(this.el.items)}this.select()}},_createItems:function(){this.log("Create queque");var t=this;e(t.el.playlist).addClass("plyr-theme-"+t.options.theme).append(e(t.el.controls.wrap)),0!=t.oitems.length&&e.each(t.oitems,(function(e,i){t._buildItem(i,e-1)}))},_buildItem:function(t,i){var s=this,a=e(this.el.controls.item),l=e(".plyr-list-content",this.el.items);return a.attr("data-play-id",t.id),a.find(".plyr-item-cover").css("background-image","url("+t.artwork_url+")"),a.find(".btn-play").attr("data-play-id",t.id),a.find(".btn-like").attr("data-id",t.id).addClass(t.like?"active":""),a.find(".plyr-item-title").html(t.title).attr("href",t.uri),a.find(".plyr-item-author").html(this.buildAuthor(t)),t.el=a,e(".plyr-list-empty",this.el.items).remove(),0==l.children().length?t.el.prependTo(l):t.el.insertAfter(l.children().eq(i)),a.on("click",".plyr-item-close",(function(t){t.preventDefault();var i=e(this).closest("[data-play-id]").attr("data-play-id");s._removeItem({id:i})})),e(document).trigger("refresh"),t},_addItem:function(e,t){t<0&&(t=0);e=this._buildItem(e,t);this.items.splice(t+1,0,e)},_removeItem:function(e){var t=this;if(null!=e.id){var i=this.getIndex(e.id);i>-1&&(this.items[i].el.remove(),this.items.splice(i,1),this.active==i&&this.setIndex(t.active,(function(){t._play(t.active)})))}},_activeItem:function(){var t=this.getCurrent();if(t){this.log("Active item"),e("[data-play-id]").removeClass("active is-current");var i='[data-play-id="'+t.id+'"]';e(i).addClass("active is-current"),t.from&&e('[data-play-id="'+t.from.id+'"]').addClass("active"),this.player.media&&this.player.paused&&(e(i).removeClass("active"),t.from&&e('[data-play-id="'+t.from.id+'"]').removeClass("active"))}},_history:function(){if(this.options.history){this.log("Store history");var e=this._store("plyr");e.active=this.active,e.items=this.items,this._store("plyr",e)}},_store:function(e,t){try{if(arguments.length>1)return localStorage.setItem(e,JSON.stringify(t));var i=localStorage.getItem(e);return i&&JSON.parse(i)||{}}catch(e){}},_play:function(e){var t=this;t.timer=0,t.items[e]&&(t.autoplay=!0,t.active=e,t._activeItem(),t.setSource(),t.updateLive(),t.playAds())},setSource:function(){if(this.player.stop(),this.isPlayable()){var t=this,i=this.getCurrent(),s=i.stream_url,a={type:i.type||"audio",sources:[{src:s,size:"576"}]};i.sources&&(a.sources=a.sources.concat(i.sources));var l=i.provider;if(""!==l&&(a.sources[0].provider=l),t.hideMsg(),this.log("Set source: "+s+" : "+l),t.live=!1,e(t.el.plyr).removeClass(t.options.liveClass),(s.toLowerCase().indexOf("icecast")>-1||s.toLowerCase().indexOf("shoutcast")>-1||s.toLowerCase().indexOf("azuracast")>-1||s.toLowerCase().indexOf(t.liveAPI)>-1)&&(t.live=!0),i.tracks&&(a.tracks=i.tracks),"audio"===a.type&&this.player.fullscreen.active&&this.player.fullscreen.exit(),t.async&&a.type==this.type&&l==this.provider&&"vimeo"!==l){if(t.log("Ansyc load"),t.resource=!1,t.select(),"html5"==l)e(this.el.playlist).find("video, audio").removeAttr("src").children().remove(),window.Plyr.source.insertElements.call(t.player,"source",a.sources),Object.keys(a).includes("tracks")&&(window.Plyr.source.insertElements.call(t.player,"track",a.tracks),t.player.language=i.tracks[0].srclang,t.player.currentTrack=0),t.player.media.load();else{var r=i.provider_id||s;switch(l){case"youtube":this.player.embed.loadVideoById(r);break;case"vimeo":this.player.embed.loadVideo(r);break;default:this.player.embed.load(r,{auto_play:!0})}}setTimeout((function(){t.player.media.dispatchEvent(new CustomEvent("ready"))}),0)}else t.log("Sync load"),this.resource=!0,this.player.source=a,e(this.el.plyr).addClass(this.options.initingClass);if(s.indexOf(".m3u8")>-1&&Hls.isSupported()){var n=new Hls;n.loadSource(s),n.attachMedia(e(this.el.playlist).find("video, audio")[0])}this.type=a.type,this.provider=l}},getItems:function(){return this.items},getItem:function(e){for(var t=0;t<this.items.length;t++)if(parseInt(this.items[t].id)===parseInt(e))return this.items[t];return!1},setItems:function(t){var i=this;this.items=t,e(".plyr-list-content",this.el.items).html('<div class="plyr-list-empty">'+this.options.i18n.empty+"</div>"),e.each(i.items,(function(e,t){i._buildItem(t,e-1)})),this._history()},select:function(t){this.log("Select item");var i=this;if(t>-1&&(this.active=t),clearTimeout(this.timeout),this.timeout=null,0!=this.items.length){var s=this.getCurrent();if(this.updateInfo(),s.stream_url.indexOf("preview")>-1?this.preview=!0:this.preview=!1,i.preview?e(this.el.playlist).addClass("plyr-is-preview"):e(this.el.playlist).removeClass("plyr-is-preview"),""!==s.purchase_url?e(this.el.purchase).addClass("is-purchasable"):e(this.el.purchase).removeClass("is-purchasable"),e(this.el.purchase).html(s.purchase_title),e(this.el.purchase).attr("href",s.purchase_url),e(this.el.purchase).next(".plyr_purchase").remove(),""!==s.purchase_link&&e(this.el.purchase).after(e(s.purchase_link).addClass("plyr_purchase")),s.downloadable?e(this.el.download).addClass("is-downloadable"):e(this.el.download).removeClass("is-downloadable"),e(this.el.download).attr("href",s.download_url),e(this.el.like).attr("data-id",s.id),s.like?e(this.el.like).addClass("active"):e(this.el.like).removeClass("active"),e(this.el.waveform).remove(),s.waveform||s.forceWaveform){var a=e(this.el.controls.waveform);e(this.el.progress).prepend(a);var l={container:a.find(".waveform-container"),id:s.id,duration:s.duration,height:40};"object"==typeof play&&play.waveform_option&&(l=e.extend(!0,{},l,play.waveform_option));var r=new Waveform(l),n=s.waveform?s.waveform:s.stream_url;r.load(n),e(r.wrap).on("update",(function(e,t,s){i.player.currentTime=i.player.duration*t}))}if(e("span",this.el.queue).html(this.options.i18n.queue+" • "+(this.active+1)+" / "+this.items.length),s.msg&&this.showMsg(s.msg),RangeTouch.setup('input[type="range"]',{}),e(document).trigger("refresh"),window.location.href!==s.uri&&"video"==this.options.theme&&e(".single-station").length){var o=s.uri;void 0!==typeof Pjax&&-1===o.toLowerCase().indexOf("reload")?e(document).trigger("reload",[o]):location.href=o}e(document).trigger("selected:player",{id:s.id}),this._history()}},updateInfo:function(){this.log("Update info");var t=this.getCurrent(),i={title:t.title,artist:t.artist,artwork:[{src:t.artwork_url}]},s=e(this.el.playlist).find("video, audio");e(this.el.cover).css("background-image","url("+t.artwork_url+")"),s.attr("poster",t.artwork_url),e(this.el.title).html("<span>"+t.title+" </span>"),s.attr("title",t.title),e(this.el.title).attr("href",t.uri),e(this.el.author).html(this.buildAuthor(t)),this.buildMarquee(e(this.el.title)),this.buildMarquee(e(this.el.author)),navigator.mediaSession&&(this.log("Navigator mediaSession"),navigator.mediaSession.metadata=new MediaMetadata(i))},buildAuthor:function(e){var t='<a href="'+e.user_url+'">'+e.user+"</a>";if(e.artist&&e.artist_url){var i=e.artist.split(","),s=e.artist_url.split(",");t=[];for(var a=0;a<i.length;++a)t.push('<a href="'+s[a]+'">'+i[a]+"</a>");t=t.join("<span>, </span>").replace(/, ((?:.(?!, ))+)$/," & $1 ")}return t},buildMarquee:function(t){if("video"!=this.options.theme){t.removeClass("marquee-scroller is-animating").attr("style","");var i=0;t.children().each((function(){var t=e(this)[0].getBoundingClientRect().width;i+=t})),Math.ceil(i)>Math.ceil(t.width())&&(t.addClass("marquee-scroller is-animating").attr("style","--marquee-scroll-width:"+i),t.append(t.children().clone()),t[0].addEventListener("animationend",(()=>{t.removeClass("is-animating")})),t[0].addEventListener("mouseover",(()=>{t.addClass("is-animating")})))}},setIndex:function(e,t){this.active=e>this.items.length-1?0:e<0?this.items.length-1:e,this.shuffle&&(this.active=Math.floor(Math.random()*this.items.length)),t&&t()},getIndex:function(e){for(var t=0;t<this.items.length;t++)if(parseInt(this.items[t].id)===parseInt(e))return t;return-1},getCurrent:function(){return this.item=this.items[this.active],this.item},isPlayable:function(){var e=this.getCurrent();return!(!e||""===e.stream_url)},updateLive:function(){if(this.live){this.log("Update live");var t,i,s,a=this,l=this.getCurrent(),r="",n="",o={},d={};a.liveServer="",l&&(r=(t=l.stream_url).substring(0,t.lastIndexOf("/")),t.toLowerCase().indexOf("icecast")>-1&&(a.liveServer="icecast",n="/status-json.xsl"),t.toLowerCase().indexOf("shoutcast")>-1&&(a.liveServer="shoutcast",n="/stats?sid=1&json=1",o.dataType="jsonp"),t.toLowerCase().indexOf("azuracast")>-1&&(a.liveServer="azuracast",n="/api/nowplaying"),t.toLowerCase().indexOf(a.liveAPI)>-1&&(a.liveServer=a.liveAPI,r="",n=t.substring(t.lastIndexOf(a.liveAPI+"=")+1)),clearTimeout(a.timeout),o.url=r+n,e.ajax(o).then((function(e){if("icecast"==a.liveServer){if(i=e.icestats.source,(s=i.length)>0){i=e.icestats.source[s-1];for(var r=0;r<s;++r)if(t.indexOf(e.icestats.source[r].listenurl)>-1){i=e.icestats.source[r];break}}i.title&&(d.title=i.title),i.artist&&(d.artist=i.artist)}else if("shoutcast"==a.liveServer)d.title=e.songtitle;else if("azuracast"==a.liveServer){i=e[e.length-1].now_playing.song;for(r=0;r<e.length;++r)if(t.indexOf(e[r].station.listen_url)>-1){i=e[r].now_playing.song;break}i.text&&(d.title=i.text),i.art&&(d.artwork_url=i.art)}else a.liveServer==a.liveAPI&&"object"==typeof e&&(d=e);if(d.title,a.timeout&&d.title&&d.title!==l.title){l.title=d.title;for(const e in d)l[e]=d[e];a.updateInfo()}a.timeout=setTimeout((function(){a.updateLive()}),5e3)})))}},playAds:function(){this.log("Play ads");var e=this;e.player.ads&&(e.adsInter%(parseInt(e.options.adsInterval)+1)==0&&e.player.ads.cancel(),e.adsInter++)},startAds:function(){this.log("Start ads"),this.adsing=!0,this.player.pause(),e(this.el.plyr).addClass(this.options.adsClass),e("html").removeClass(this.options.bufferingClass)},stopAds:function(){this.log("Stop ads"),this.adsing=!1,e(this.el.plyr).removeClass(this.options.adsClass)},showMsg:function(t){this.log("Show msg");var i=this;0==e(i.el.msg).length&&e(i.el.playlist).append(i.el.controls.msg),e(i.el.msg+" .close").off().on("click",(function(){i.hideMsg()})),e(i.el.msg).show().find(".plyr__msg_desc").html(t)},hideMsg:function(){this.log("Hide msg"),e(this.el.msg).hide()},play:function(t,i){var s;if(e(this.el.playlist).removeClass("close-player"),e.isArray(t))t.length&&(this.setItems(t),s=i||0,this._play(s));else if(-1==(s=this.getIndex(t.id)))s=1==i?this.active:this.items.length-1,this.add(t,s),1!=this.items.length&&0!=i||this._play(this.items.length-1);else{if(1==i){var a=this.getItem(t.id);return this.remove(t.id),void this.add(a,this.active)}if(-1==i)return;s!==this.active?this._play(s):this.adsing||this.player.togglePlay()}},pause:function(){this.player.pause()},prev:function(){var e=this;this.setIndex(e.active-1,(function(){e._play(e.active)}))},next:function(){var e=this;this.setIndex(e.active+1,(function(){e._play(e.active)}))},autoNext:function(){var t=e.map(this.items,(function(e){return e.id}));e(document).trigger("complete.play",{ids:t,shuffle:this.shuffle})},add:function(e,t){this._addItem(e,t)},remove:function(e){var t=this.getCurrent();this._removeItem({id:e}),this.active=this.getIndex(t.id)},log:function(e){this.player.debug.log("> "+e)}}}(jQuery);var spotify={setup(){var e=this;e.elements.wrapper.classList.add(e.config.classNames.embed),e.config.urls.spotify="spotify","object"!=typeof window.SpotifyIFrameAPI?spotify.loadScript.call(e):spotify.ready.call(e)},ready(){var e=this,t=e.media.getAttribute("src");if(-1!=t.indexOf("spotify.com")){var i=e.config.urls.spotify+t.replace("https://open.spotify.com","").replace(/\//gi,":"),s=document.createElement("iframe");s.setAttribute("allow",["autoplay"].join("; ")),e.media=e.media.parentNode.replaceChild(s,e.media);SpotifyIFrameAPI.createController(s,{uri:i},(t=>{e.media.paused=!0,e.media.currentTime=0,e.options.speed=[1],e.embed=t,e.media.play=function(){assurePlaybackState.call(e,!0),e.embed.hasPlayed?e.embed.togglePlay():e.embed.play()},e.media.pause=function(){assurePlaybackState.call(e,!1),e.embed.pause()},e.media.stop=function(){e.pause(),e.media.currentTime=0},e.embed.load=function(t){e.embed.loadUri(e.config.urls.spotify+t.replace(/\//gi,":"))};var i=e.media.currentTime;Object.defineProperty(e.media,"currentTime",{get:()=>i,set(t){e.media.seeking=!0,triggerEvent.call(e,e.media,"seeking"),e.embed.seek(parseInt(t))}}),e.embed.addListener("ready",(function(t){triggerEvent.call(e,e.media,"waiting")})),e.embed.addListener("playback_update",(function(t){t.data.duration>0&&t.data.position==t.data.duration?triggerEvent.call(e,e.media,"ended"):(assurePlaybackState.call(e,!t.data.isPaused),t.data.isBuffering||(e.media.seeking&&t.data.isPaused&&e.media.play(),e.media.seeking=!1,triggerEvent.call(e,e.media,"seeked")),i=parseInt(t.data.position/1e3),triggerEvent.call(e,e.media,"timeupdate"),e.media.duration!=t.data.duration/1e3&&(e.media.duration=t.data.duration/1e3,triggerEvent.call(e,e.media,"durationchange")),triggerEvent.call(e,e.media,t.data.isBuffering?"seeking":"playing"))}))})),setTimeout((function(){window.Plyr.ui.build.call(e)}),0)}},loadScript(){var e=this,t=document.createElement("script");t.onload=function(){window.onSpotifyIframeApiReady=t=>{window.SpotifyIFrameAPI=t,spotify.ready.call(e)}},t.src="//open.spotify.com/embed-podcast/iframe-api/v1",document.head.appendChild(t)}},soundcloud={setup(){var e=this;e.elements.wrapper.classList.add(e.config.classNames.embed),e.config.urls.soundcloud="https://w.soundcloud.com/player/?url=","object"!=typeof window.SC?soundcloud.loadScript.call(e):soundcloud.ready.call(e)},ready(){var e=this,t=e.media.getAttribute("src");if(-1!=t.indexOf("soundcloud.com")){var i=e.config.urls.soundcloud+t+"&auto_play=true",s=document.createElement("iframe");s.setAttribute("src",i),s.setAttribute("allow",["autoplay"].join("; ")),e.media=e.media.parentNode.replaceChild(s,e.media),e.embed=SC.Widget(s),e.embed.bind(SC.Widget.Events.READY,(function(){var t;e.media.paused=!0,e.media.currentTime=0,e.options.speed=[1],e.media.play=function(){assurePlaybackState.call(e,!0),e.embed.play()},e.media.pause=function(){assurePlaybackState.call(e,!1),e.embed.pause()},e.media.stop=function(){e.embed.seekTo(0),e.embed.pause(),e.media.paused=!0},e.embed.getCurrentSound((function(e){t=e.uri})),Object.defineProperty(e.media,"currentSrc",{get:()=>t});var i=e.media.currentTime;Object.defineProperty(e.media,"currentTime",{get:()=>i,set(t){e.media.seeking=!0,triggerEvent.call(e,e.media,"seeking"),e.embed.seekTo(1e3*t)}}),Object.defineProperty(e.media,"volume",{get:()=>e.config.volume,set(t){e.embed.setVolume(100*t),e.config.volume=t,triggerEvent.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"muted",{get:()=>e.config.muted,set(t){var i="boolean"==typeof t&&t;e.embed.setVolume(i?0:100*e.config.volume),e.config.muted=i,triggerEvent.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"ended",{get:()=>e.currentTime===e.duration}),e.embed.getDuration((function(t){e.media.duration=t/1e3,triggerEvent.call(e,e.media,"durationchange")})),e.embed.bind(window.SC.Widget.Events.PLAY,(function(){assurePlaybackState.call(e,!0),triggerEvent.call(e,e.media,"playing")})),e.embed.bind(window.SC.Widget.Events.PAUSE,(function(){assurePlaybackState.call(e,!1)})),e.embed.bind(window.SC.Widget.Events.FINISH,(function(){e.media.paused=!0,triggerEvent.call(e,e.media,"ended")})),e.embed.bind(window.SC.Widget.Events.LOAD_PROGRESS,(function(t){e.media.buffered=t.loadProgress,triggerEvent.call(e,e.media,"progress"),1===parseInt(t.loadProgress)&&triggerEvent.call(e,e.media,"canplaythrough")})),e.embed.bind(window.SC.Widget.Events.PLAY_PROGRESS,(function(t){e.media.seeking=!1,i=parseInt(t.currentPosition/1e3),triggerEvent.call(e,e.media,"timeupdate")})),setTimeout((function(){window.Plyr.ui.build.call(e)}),0)}))}},loadScript(){var e=this,t=document.createElement("script");t.onload=function(){soundcloud.ready.call(e)},t.src="//w.soundcloud.com/player/api.js",document.head.appendChild(t)}},mixcloud={setup(){var e=this;e.elements.wrapper.classList.add(e.config.classNames.embed),e.config.urls.mixcloud="https://www.mixcloud.com/widget/iframe/?hide_cover=1&mini=1&feed=","object"!=typeof window.Mixcloud?mixcloud.loadScript.call(e):mixcloud.ready.call(e)},ready(){var e=this,t=e.media.getAttribute("src");if(-1!=t.indexOf("soundcloud.com")){var i=e.config.urls.mixcloud+t,s=document.createElement("iframe");s.setAttribute("src",i),s.setAttribute("allow",["autoplay"].join("; ")),e.media=e.media.parentNode.replaceChild(s,e.media),e.embed=Mixcloud.PlayerWidget(s),e.embed.ready.then((function(){e.media.paused=!0,e.media.currentTime=0,e.options.speed=[1],e.media.play=function(){assurePlaybackState.call(e,!0),e.embed.play()},e.media.pause=function(){assurePlaybackState.call(e,!1),e.embed.pause()},e.media.stop=function(){e.embed.seek(0),e.embed.pause(),e.media.paused=!0};var t=e.media.currentTime;Object.defineProperty(e.media,"currentTime",{get:()=>t,set(t){e.media.seeking=!0,triggerEvent.call(e,e.media,"seeking"),e.embed.seek(t).then((function(){e.media.seeking=!1,e.embed.play()}))}}),Object.defineProperty(e.media,"volume",{get:()=>e.config.volume,set(t){e.embed.setVolume(100*t),e.config.volume=t,triggerEvent.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"muted",{get:()=>e.config.muted,set(t){var i="boolean"==typeof t&&t;e.embed.setVolume(i?0:100*e.config.volume),e.config.muted=i,triggerEvent.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"ended",{get:()=>e.currentTime===e.duration}),e.embed.getDuration().then((function(t){e.media.duration=t,triggerEvent.call(e,e.media,"durationchange")})),e.embed.events.play.on((function(){assurePlaybackState.call(e,!0),triggerEvent.call(e,e.media,"playing")})),e.embed.events.pause.on((function(){assurePlaybackState.call(e,!1)})),e.embed.events.ended.on((function(){e.media.paused=!0,triggerEvent.call(e,e.media,"ended")})),e.embed.events.buffering.on((function(t){e.media.buffered=t,1===parseInt(t)&&triggerEvent.call(e,e.media,"canplaythrough")})),e.embed.events.progress.on((function(i){e.media.seeking=!1,t=i,triggerEvent.call(e,e.media,"timeupdate")})),setTimeout((function(){window.Plyr.ui.build.call(e)}),0)}))}},loadScript(){var e=this,t=document.createElement("script");t.onload=function(){mixcloud.ready.call(e)},t.src="//widget.mixcloud.com/media/js/widgetApi.js",document.head.appendChild(t)}};